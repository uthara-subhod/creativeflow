"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[900],{3900:(B,f,a)=>{a.r(f),a.d(f,{ModeratorModule:()=>z});var p=a(6814),d=a(4190),g=a(1476),m=a(3566),c=a(5313),t=a(5879),_=a(6347),Z=a(2296);let h=(()=>{var e;class r{constructor(){this.role="mod"}logout(){}}return(e=r).\u0275fac=function(o){return new(o||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-navbar"]],decls:54,vars:4,consts:[[1,"col-12"],[1,"top","d-flex","align-items-center","justify-content-between"],[1,"d-flex","mx-2","align-items-center"],["src","../../../../../assets/images/CreativeFlow-logos_white.png","alt","","width","50px"],[1,"text-5","fs-5","mt-3"],[1,"bottom","d-flex","justify-content-between","align-items-center","py-lg-0","py-4"],[1,"d-md-flex","d-none","justify-content-start","align-items-center","mx-3"],[1,"link","navlink",3,"href"],[1,"mx-2","navlink"],[1,"d-md-none","justify-content-start","align-items-center","mx-3","d-flex"],["routerLink","/profile",1,"link","navlink"],[1,"fa-solid","fa-user"],[1,"mx-2"],[1,"link",3,"click"],[1,"fa-solid","fa-right-from-bracket"],["tabindex","-1","id","offcanvasRight","aria-labelledby","offcanvasRightLabel",1,"offcanvas","offcanvas-end",2,"background-color","#b39eb1"],[1,"offcanvas-header","d-flex","justify-content-center"],[1,"text-5","fs-5","mt-3","text-light"],["type","button","data-bs-dismiss","offcanvas","aria-label","Close",1,"btn-close","text-reset","text-light"],[1,"offcanvas-body"],[1,"d-flex","flex-column","align-items-center","text-light"],["routerLink","/",1,"w-100","text-center","py-2","text-light",2,"border-bottom","solid 1px !important"],["routerLink","/browse/books",1,"w-100","text-center","py-2","text-light",2,"border-bottom","solid 1px !important"],["routerLink","/browse/artworks",1,"w-100","text-center","py-2","text-light",2,"border-bottom","solid 1px !important"],["routerLink","/browse/people",1,"w-100","text-center","py-2","text-light",2,"border-bottom","solid 1px !important"],["routerLink","/profile",1,"w-100","text-center","py-2","text-light",2,"border-bottom","solid 1px !important"],["type","button",1,"btn","btn-secondary","w-100","mt-3"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"span",2),t._UZ(3,"img",3),t.TgZ(4,"p",4),t._uU(5,"BehindFlow"),t.qZA()()(),t.TgZ(6,"div",5)(7,"div",6)(8,"a",7),t._uU(9,"Reports"),t.qZA(),t.TgZ(10,"a",8),t._uU(11,"|"),t.qZA(),t.TgZ(12,"a",7),t._uU(13,"Users"),t.qZA(),t.TgZ(14,"a",8),t._uU(15,"|"),t.qZA(),t.TgZ(16,"a",7),t._uU(17,"Books"),t.qZA(),t.TgZ(18,"a",8),t._uU(19,"|"),t.qZA(),t.TgZ(20,"a",7),t._uU(21,"Artworks"),t.qZA()(),t.TgZ(22,"div",9)(23,"a",10),t._UZ(24,"i",11),t._uU(25," Account"),t.qZA(),t.TgZ(26,"a",12),t._uU(27,"|"),t.qZA(),t.TgZ(28,"a",13),t.NdJ("click",function(){return i.logout()}),t._UZ(29,"i",14),t._uU(30," Logout"),t.qZA()()()(),t.TgZ(31,"div",15)(32,"div",16)(33,"span",2),t._UZ(34,"img",3),t.TgZ(35,"p",17),t._uU(36,"CreativeFlow"),t.qZA()(),t._UZ(37,"button",18),t.qZA(),t.TgZ(38,"div",19)(39,"div",20)(40,"a",21),t._uU(41,"Home"),t.qZA(),t.TgZ(42,"a",22),t._uU(43,"Books"),t.qZA(),t.TgZ(44,"a",23),t._uU(45,"Artworks"),t.qZA(),t.TgZ(46,"a",24),t._uU(47,"People"),t.qZA(),t.TgZ(48,"a",21),t._uU(49,"Services"),t.qZA(),t.TgZ(50,"a",25),t._uU(51,"Account"),t.qZA(),t.TgZ(52,"button",26),t._uU(53,"Logout"),t.qZA()()()()),2&o&&(t.xp6(8),t.Q6J("href","/moderator",t.LSH),t.xp6(4),t.Q6J("href","/moderator/users",t.LSH),t.xp6(4),t.Q6J("href","/moderator/books",t.LSH),t.xp6(4),t.Q6J("href","/moderator/books",t.LSH))},dependencies:[d.rH],styles:[".bottom[_ngcontent-%COMP%]{height:40px;width:100%;background-color:#fff;box-shadow:10px 5px 10px 5px #c5c5c51a}.top[_ngcontent-%COMP%]{height:68px;width:100%;background-color:#5e3e5c}.search-icon[_ngcontent-%COMP%]{position:absolute;top:50%;right:10px;transform:translateY(-50%);font-size:16px;color:#666;cursor:pointer}.text-5[_ngcontent-%COMP%]{font-family:Sitara;font-style:italic;line-height:auto;color:#e9d4df}.rectangle-5[_ngcontent-%COMP%]{border-radius:15px;height:35px;background-color:#cea8a8;font-family:Sitara,sans-serif;letter-spacing:9%;color:#5e3e5c}.menu[_ngcontent-%COMP%]{background-color:#cea8a8;margin-right:10px;color:#5e3e5c}.text-6[_ngcontent-%COMP%]{text-align:left;vertical-align:top;font-family:Sitara;letter-spacing:9%;color:#5e3e5c}.search-container[_ngcontent-%COMP%]{position:relative;margin-right:5px;width:300px}.search[_ngcontent-%COMP%]{width:100%;border-radius:4px;height:35px;font-size:15px;letter-spacing:2px;padding:10px 30px 10px 15px;border:none}a[_ngcontent-%COMP%]{text-decoration:none;color:#06010c}.navlink[_ngcontent-%COMP%]{color:#56007e}.link[_ngcontent-%COMP%]{cursor:pointer;font-size:18px}.link[_ngcontent-%COMP%]:hover{color:#8b5c88}.notif-wrapper[_ngcontent-%COMP%]{position:relative}.dropdown-container[_ngcontent-%COMP%]{position:absolute;top:100%;right:0;height:300px;overflow-y:auto;background-color:#fff;border:1px solid #ccc;box-shadow:0 3px 5px #0003;display:none;padding:15px 5px 5px 15px;z-index:9999}.dropdown-container.active[_ngcontent-%COMP%]{display:block}"]}),r})();function v(e,r){1&e&&(t.TgZ(0,"th",10),t._uU(1,"SL No"),t.qZA())}function b(e,r){if(1&e&&(t.TgZ(0,"td",11),t._uU(1),t.qZA()),2&e){const n=r.index;t.xp6(1),t.Oqu(n+1)}}function C(e,r){if(1&e&&(t.TgZ(0,"th",10),t._uU(1),t.qZA()),2&e){const n=t.oxw().index,o=t.oxw();t.xp6(1),t.Oqu(o.displayedColumns[n])}}function T(e,r){if(1&e&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&e){const n=t.oxw().$implicit,o=t.oxw().$implicit;t.xp6(1),t.hij("",n[o]," ")}}function A(e,r){if(1&e&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&e){const n=t.oxw().$implicit,o=t.oxw().$implicit;t.xp6(1),t.hij("",n[o].fullname," ")}}function y(e,r){1&e&&(t.TgZ(0,"button",16),t._uU(1,"Resolved "),t.qZA())}function U(e,r){1&e&&(t.TgZ(0,"button",17),t._uU(1," Pending "),t.qZA())}function w(e,r){if(1&e&&(t.TgZ(0,"td",11),t.YNc(1,T,2,1,"div",13),t.YNc(2,A,2,1,"div",13),t.YNc(3,y,2,0,"button",14),t.YNc(4,U,2,0,"button",15),t.qZA()),2&e){const n=r.$implicit,o=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf","reporter"!=o&&"resolved"!=o),t.xp6(1),t.Q6J("ngIf","reporter"==o),t.xp6(1),t.Q6J("ngIf","resolved"==o&&n.resolved),t.xp6(1),t.Q6J("ngIf","resolved"==o&&!n.resolved)}}function M(e,r){1&e&&(t.ynx(0,12),t.YNc(1,C,2,1,"th",4),t.YNc(2,w,5,4,"td",5),t.BQk()),2&e&&t.s9C("matColumnDef",r.$implicit)}function R(e,r){if(1&e&&(t.TgZ(0,"th",19),t._uU(1),t.qZA()),2&e){const n=t.oxw().$implicit;t.xp6(1),t.Oqu(n)}}function q(e,r){if(1&e&&(t.TgZ(0,"td",11)(1,"a",20),t._uU(2,"view details"),t.qZA()()),2&e){const n=r.$implicit;t.xp6(1),t.Q6J("color","primary")("href","/moderator/reports/"+n.report_id,t.LSH)}}function k(e,r){1&e&&(t.ynx(0,12),t.YNc(1,R,2,1,"th",18),t.YNc(2,q,3,2,"td",5),t.BQk()),2&e&&t.s9C("matColumnDef",r.$implicit)}function O(e,r){1&e&&t._UZ(0,"tr",21)}function H(e,r){1&e&&t._UZ(0,"tr",22)}const x=function(){return["slno"]},D=function(){return[5,10,25,50,100]};let N=(()=>{var e;class r{constructor(o){this.mod=o,this.displayedColumns=["Reporter","Item","Status","Reported Date","Resolved Date","Action taken"],this.columns=["reporter","item","resolved","reported_date","resolved_date","action"],this.actions=["view"],this.type="",this.id="",this.dataSource=new c.by([])}ngOnChanges(o){o.tableData&&o.tableData.currentValue&&(this.dataSource.data=this.tableData),this.dataSource.data=this.tableData,console.log("hi",this.dataSource)}ngOnInit(){this.mod.getReports().subscribe({next:o=>{this.tableData=o.reports,this.dataSource.data=this.tableData}})}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}}return(e=r).\u0275fac=function(o){return new(o||e)(t.Y36(_.s))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-home"]],viewQuery:function(o,i){if(1&o&&(t.Gf(g.NW,5),t.Gf(m.YE,5)),2&o){let l;t.iGM(l=t.CRH())&&(i.paginator=l.first),t.iGM(l=t.CRH())&&(i.sort=l.first)}},features:[t.TTD],decls:13,vars:9,consts:[[1,"my-5","text-center"],[1,"mat-elevation-z8","container","mt-5"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","slno"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[3,"matColumnDef"],[4,"ngIf"],["class","btn rounded-pill btn-success py-0",4,"ngIf"],["class","btn rounded-pill btn-danger py-0",4,"ngIf"],[1,"btn","rounded-pill","btn-success","py-0"],[1,"btn","rounded-pill","btn-danger","py-0"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-cell",""],["mat-flat-button","",3,"color","href"],["mat-header-row",""],["mat-row",""]],template:function(o,i){1&o&&(t._UZ(0,"app-navbar"),t.TgZ(1,"h3",0),t._uU(2,"REPORTS"),t.qZA(),t.TgZ(3,"div",1)(4,"table",2),t.ynx(5,3),t.YNc(6,v,2,0,"th",4),t.YNc(7,b,2,1,"td",5),t.BQk(),t.YNc(8,M,3,1,"ng-container",6),t.YNc(9,k,3,1,"ng-container",6),t.YNc(10,O,1,0,"tr",7),t.YNc(11,H,1,0,"tr",8),t.qZA(),t._UZ(12,"mat-paginator",9),t.qZA()),2&o&&(t.xp6(4),t.Q6J("dataSource",i.dataSource),t.xp6(4),t.Q6J("ngForOf",i.columns),t.xp6(1),t.Q6J("ngForOf",i.actions),t.xp6(1),t.Q6J("matHeaderRowDef",t.DdM(6,x).concat(i.columns,i.actions)),t.xp6(1),t.Q6J("matRowDefColumns",t.DdM(7,x).concat(i.columns,i.actions)),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(8,D)))},dependencies:[p.sg,p.O5,Z.zs,g.NW,m.YE,m.nU,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,h]}),r})();var S=a(3678),J=a(3519),u=a.n(J),s=a(6223);function Q(e,r){if(1&e&&(t.TgZ(0,"a",4),t._uU(1),t._UZ(2,"br"),t.qZA()),2&e){const n=r.$implicit;t.Q6J("href",n,t.LSH),t.xp6(1),t.Oqu(n)}}function Y(e,r){1&e&&(t.TgZ(0,"h6"),t._uU(1,"Status: Resolved"),t.qZA())}function P(e,r){if(1&e){const n=t.EpF();t.TgZ(0,"div",5)(1,"label",6),t._uU(2,"Choose action to be taken"),t.qZA(),t.TgZ(3,"div")(4,"select",7),t.NdJ("ngModelChange",function(i){t.CHM(n);const l=t.oxw();return t.KtG(l.action=i)}),t.TgZ(5,"option",8),t._uU(6,"Warn"),t.qZA(),t.TgZ(7,"option",9),t._uU(8,"Unpublish"),t.qZA(),t.TgZ(9,"option",10),t._uU(10,"Reject"),t.qZA()()(),t.TgZ(11,"button",11),t.NdJ("click",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.submit())}),t._uU(12,"Resolve Report"),t.qZA()()}if(2&e){const n=t.oxw();t.xp6(4),t.Q6J("ngModel",n.action)}}const L=[{path:"",canActivate:[S.a1],children:[{path:"",component:N},{path:"reports/:report_id",component:(()=>{var e;class r{constructor(o,i){this.mod=o,this.route=i,this.action="",this.resolved=!1}ngOnInit(){let o="";this.route.params.subscribe(i=>{o=i.report_id}),o&&this.mod.getReport(o).subscribe({next:i=>{this.report=i.report,this.item=i.report.book_id||i.report.artwork_id||i.report.chapter_id}})}submit(){if(""==this.action)return void u().fire({icon:"error",title:"Miising Fields",text:"You havent added all details to resolve the report!",showConfirmButton:!1});const o={action:this.action,resolved:!0,resolved_date:Date.now()};this.mod.resolveReport(this.report.report_id,o).subscribe({next:i=>{u().fire("Report resolved succesfully!","","success"),this.ngOnInit()},error:()=>{u().fire("An error occured!","","error")}})}}return(e=r).\u0275fac=function(o){return new(o||e)(t.Y36(_.s),t.Y36(d.gz))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-report"]],decls:19,vars:8,consts:[[1,"container","my-5","bg-white","p-5","border"],[3,"href",4,"ngFor","ngForOf"],[4,"ngIf"],["class","form-group my-3",4,"ngIf"],[3,"href"],[1,"form-group","my-3"],["for","violation"],["id","violation","name","violation","required","required",1,"form-select",3,"ngModel","ngModelChange"],["value","warn"],["value","unpublish"],["value","reject"],[1,"btn","btn-secondary","my-3",3,"click"]],template:function(o,i){1&o&&(t._UZ(0,"app-navbar"),t.TgZ(1,"div",0)(2,"h2"),t._uU(3,"Report Details"),t.qZA(),t.TgZ(4,"h6"),t._uU(5),t.qZA(),t.TgZ(6,"h6"),t._uU(7),t.qZA(),t.TgZ(8,"h6"),t._uU(9),t.qZA(),t.TgZ(10,"h6"),t._uU(11),t.qZA(),t.TgZ(12,"h6"),t._uU(13),t.qZA(),t.TgZ(14,"h6"),t._uU(15,"Links: "),t.YNc(16,Q,3,2,"a",1),t.qZA(),t.YNc(17,Y,2,0,"h6",2),t.YNc(18,P,13,1,"div",3),t.qZA()),2&o&&(t.xp6(5),t.hij("Report id :",i.report.report_id,""),t.xp6(2),t.hij("Reported by: ",i.report.reporter.fullname,""),t.xp6(2),t.hij("Reported item: ",i.report.item,""),t.xp6(2),t.hij("Reporter item id: ",i.item._id,""),t.xp6(2),t.hij("Description : ",i.report.description,""),t.xp6(3),t.Q6J("ngForOf",i.report.links),t.xp6(1),t.Q6J("ngIf",i.resolved),t.xp6(1),t.Q6J("ngIf",!i.resolved))},dependencies:[p.sg,p.O5,s.YN,s.Kr,s.EJ,s.JJ,s.Q7,s.On,h]}),r})()}]}];let j=(()=>{var e;class r{}return(e=r).\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[d.Bz.forChild(L),d.Bz]}),r})();var I=a(8893);let z=(()=>{var e;class r{}return(e=r).\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[p.ez,j,I.q,s.u5]}),r})()}}]);